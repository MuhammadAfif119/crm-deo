# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy to Firebase Hosting on merge
'on':
  push:
    branches:
      - main
jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    env:
          PROJECT_ID: buildfire-project
          SITES: edrus-pasardigital edrus-test
          FIREBASE_TOKEN: 1//0g74DJWSuhiE-CgYIARAAGBASNwF-L9IrUp3Ija1h8WS2bCwrq6xneopw4FXbCkzZ8g5BzKNC4r6QTao10cqbCZ0mpgsCOMHnSeA
          CI: false
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2
     
      - name: Install Firebase CLI
        run: npm install -g firebase-tools

      - name: Deploy Firebase Hosting
        run: |
          for site in $SITES
          do
            firebase target:clear hosting admin $site
            sudo firebase deploy --only hosting:admin --token "$FIREBASE_TOKEN"
          done